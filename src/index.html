<!doctype html>
<html lang='en' ng-app='app' ng-controller='controller'>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>{{ config.report_name }}</title>
<!--<link rel='stylesheet' href='assets/css/angular-chart.css'>-->
<link rel='stylesheet' href='assets/css/style.css'>
</head>
<body>

<aside class='form'>
	<form ng-submit='process()'>
	<div class='tbl'>
		<div class='tr'>
			<div class='td td4'>
				<label for='start_date'>Start Date</label>
				<input type='date' name='start_date' id='start_date' ng-model='form.start_date'>
			</div>
			<div class='td td4'>
				<label for='end_date'>End Date</label>
				<input type='date' name='end_date' id='end_date' ng-model='form.end_date'>
			</div>
			<div class='td td4' ng-show='dimensions'>
				<label for='dimension'>Dimension</label>
				<input type='text' name='dimension' id='dimension' ng-model='form.dimension' placeholder='Type to search available dimensions.'>
			</div>
			<div class='td td4'>
				<input type='submit' value='Load Dimensions' ng-if='!form.dimension'>
				<input type='submit' value='Generate Report' ng-if='form.dimension'>
			</div>
		</div>
	</div>
	</form>
</aside>

<div class='wrapper'>
	<header>
		<h1>{{ config.report_name }}</h1>
		<h2 ng-if='summary'>{{ config.report_name }} for {{ form.dimension }}</h2>
		<h3>{{ form.start_date | date: 'MMMM d, yyyy' }} - {{ form.end_date | date: 'MMMM d, yyyy' }}</h3>
	</header>

	<p class='msg' ng-if='!dimensions'>Select the desired date range above, then click 'Load Dimensions'.</p>
	<p class='msg' ng-if='dimensions && !summary'>Select a dimension, then click 'Generate Report'.</p>

	<ul class='errors' ng-if='errors.length > 0'>
		<li ng-repeat='error in errors'>{{ error }}
	</ul>

	<section ng-if='summary'>
		<h1>Usage Summary</h1>
		<div ng-bind-html='summary'></div>
	</section>

	<section>
		<canvas id='users' class='chart chart-line' data='chart1_data' labels='chart_labels' legend='true' series='chart1_series'></canvas>

		<canvas id='pageviews' class='chart chart-line' data='chart2_data' labels='chart_labels' legend='true' series='chart2_series'></canvas>

		<canvas id='bouncerate' class='chart chart-line' data='chart3_data' labels='chart_labels' legend='true' series='chart3_series'></canvas>
	</section>

	<section ng-if='monthly'>
		<h1>Monthly Usage</h1>
		<div ng-bind-html='monthly' class='row'></div>
	</section>

	<footer>
		<p><b>Can't find a dimension?</b> Dimensions are listed based on the date range selected. If no data is available for a dimension during the specified date range, the dimension won't appear on the dropdown menu.</p>
		<h1>Limitations</h1>
		<p>Due to the nature and <a href='https://developers.google.com/analytics/devguides/reporting/core/v2/limits-quotas' target='_blank'>limitations of the Google Analytics API</a>, <b>monthly usage summaries may bleed over into the next month depending on the date range you've selected</b>. All months are calculated based off the start date of individual queries. Queries are made in increments of {{ config.max_days }} days. If the end date spans the next month, the data could bleed over up to {{ config.max_days }} days into the next month. To help avoid this, select the first of the month for the start date and last day of the month for the end date when generating reports for multiple months.</p>
	</footer>
</div>

<script src='http://code.jquery.com/jquery-2.1.3.min.js'></script>
<script src='//ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.min.js'></script>
<!--<script src='assets/js/Chart.js'></script>
<script src='assets/js/angular-chart.js'></script>-->
<script src='assets/js/app.js'></script>
</body>
</html>
